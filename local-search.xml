<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Linux 基础知识</title>
    <link href="/2022/09/25/basic-linux-command/"/>
    <url>/2022/09/25/basic-linux-command/</url>
    
    <content type="html"><![CDATA[<p>介绍Linux相关的基础知识，简单描述了Linux基础概率以及一些常用命令，如：ls、cd、mkdir、vi、cat、cp等。</p><span id="more"></span><h2 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h2><ol><li><p>Linux系统与Windows一样有着文件管理，文件的路径又分绝对路径和相对路径。绝对路径是以&#x2F;开始，例如&#x2F;usr&#x2F;local，而相对路径不以&#x2F;开始，例如..&#x2F;，这个就是当前目录的上一层</p></li><li><p>在Linux系统中，不同用户有着不同的<strong>家目录</strong>（也就是不同用户登陆上Linux初始位置）。如果你以root账号登陆，家目录就是&#x2F;root&#x2F;，如果你以普通用户xxx登陆，那么系统默认的家目录就是&#x2F;home&#x2F;xxx&#x2F;，当然也可以指定普通用户的家目录为其他目录，在后续文章会补充</p></li><li><p>环境变量，分成两种全局环境变量和个人环境变量：</p><ul><li><p>全局环境变量</p><p>Linux中&#x2F;etc&#x2F;profile就是全局变量，无论你用哪个用户登录都可以使用该文件里的所有变量，增加变量只需要在文件末尾增添代码，且使用以下命令使其生效：</p><p><code>. /etc/profile</code><br>或者<br><code>source /etc/profile</code></p></li><li><p>个人环境变量</p><p>只针对个人用户，存放的路径就在 <strong>~&#x2F;.bash_profile</strong> 中，打开该文件你会发现它其实还涉及到另一个文件 <strong>~&#x2F;.bashrc</strong>，所以如果你要设置变量，也是在两个文件末尾添加代码，但是建议使用 <strong>~&#x2F;.bashrc</strong>。生效命令如下：</p><p><code>source ~/.bash_profile</code>    <code>source ~/.bashrc</code></p></li></ul></li></ol><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><ul><li><p><em>pwd</em>，查看当前目录的绝对路径，显示是从&#x2F;开始</p></li><li><p><em>ls</em>，查看当前路径下的文件或文件夹</p><blockquote><p>ls &#x2F; 只显示该目录下的文件或文件夹的名称<br>ls -l &#x2F; 显示该目录下的文件或文件夹的明细信息，ls -l &#x3D;&#x3D;&gt;ll，更多用ll代替<br>ll -h 查看文件大小，只能看文件不能看文件夹，如果想看文件夹大小，请使用du -sh 文件或文件夹名<br>ll -rt 给文件或文件夹以时间排序，可以找出最新的文件或文件夹</p></blockquote></li><li><p><em>cd</em>，切换目录</p><blockquote><p>cd -    回到上一次目录<br>cd ..&#x2F;  回退上一层目录（相对路径）<br>cd ..&#x2F;..&#x2F; 回退2个目录（相对路径）</p></blockquote></li><li><p><em>mkdir</em>，创建文件夹</p><blockquote><p>mkdir xxx 只能创建1个<br>mkdir -p xxx&#x2F;1&#x2F;2 级联创建文件夹<br>mkdir 4 5 6 并行创建4 5 6 文件夹</p></blockquote></li><li><p><em>cp</em>，复制拷贝文件&#x2F;文件夹</p><blockquote><p>cp -r xx xx&#x2F;     文件夹拷贝 需要-r参数</p></blockquote></li><li><p><em>mv</em>，移动或改名文件&#x2F;文件夹</p><blockquote><p>mv test.log test                移动文件到新的地方 名称不变<br>mv test1.log  test&#x2F;test123.log 移动文件到新的地方 名称变<br>mv test1 test  移动文件夹</p></blockquote></li><li><p><em>cat&#x2F;more&#x2F;less</em>，查看文件内容</p><blockquote><p>cat  文件内容一下子全部显示 适用字节内容较少<br> 查看日志的内容ERROR 定位错误<br>假如文件超大 10m   发送给window电脑，通过editplus 全局搜索<br>假如文件假如100m+（grep -C 是指搜索”ERROR”前后10行）<br>cat install.log | grep -C 10 “ERROR”<br>假如 ERROR筛选的结果 特多(&gt; 重定向覆盖输出到文件，&gt;&gt; 追加)<br>cat install.log | grep -C 10 “ERROR” &gt; error.log<br>more 文件内容一页一页的往下翻 按空格键往下<br>回退不了 按q退出   适用字节内容稍多的<br>less 文件内容 一行行 按箭头上下  按q退出</p></blockquote></li><li><p><em>tail</em>，实时查看</p><blockquote><p>实际工作中，对于日志总会面临日志过大的问题，一般使用切割法。<br>到达某个数值，mv xxx.log xxx.log1，然后再touch xxx.log。<br>推荐使用 tail -F xxx.log，-F&#x3D;-f+retry，-f 不够强大，文件只要被移走，就算新的一模一样，也不会实时监控</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs SHELL">[root@hadoop001 ~]# tail -F xxx.log <br>123<br>4<br>tail: `xxx.log&#x27; has become inaccessible: No such file or directory<br>tail: `xxx.log&#x27; has appeared;  following end of new file<br>5<br></code></pre></td></tr></table></figure></li></ul><blockquote><p>但是如果你要看以倒数50行开始的日志，只能是tail -50f xxx.log</p></blockquote><ul><li><p><em>help</em>，命令帮助</p><blockquote><p>命令 –help<br>例如:<br>[root@hadoop001 ~]# ls –help<br>Usage: ls [OPTION]… [FILE]…<br>[]代表可以省略</p></blockquote></li><li><p>alias，别名</p><p>上面提到ls -l&#x3D;ll，这个就是Linux中的别名，使用alias可以查看系统默认的别名</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@hadoop001 ~]# alias<br>alias cp=&#x27;cp -i&#x27;<br>alias egrep=&#x27;egrep --color=auto&#x27;<br>alias fgrep=&#x27;fgrep --color=auto&#x27;<br>alias grep=&#x27;grep --color=auto&#x27;<br>alias l.=&#x27;ls -d .* --color=auto&#x27;<br>alias ll=&#x27;ls -l --color=auto&#x27;<br>alias ls=&#x27;ls --color=auto&#x27;<br>alias mv=&#x27;mv -i&#x27;<br>alias rm=&#x27;rm -i&#x27;<br>alias which=&#x27;alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde&#x27;<br></code></pre></td></tr></table></figure></li></ul><p>​      <em>注意：使用<strong>alias 别名&#x3D;命令字符串</strong>就可以在当前session会话中生效，如果你想要一直生效，请在<strong>环境变量文件末</strong>中增添上述命令</em></p><ul><li><p>rm，删除</p><blockquote><p>一般都是使用 rm -rf 文件名，这种方式会强制删除文件或者文件夹，**-f表示强制，-r表示可以文件夹**。经常听到就是 rm -rf &#x2F;*，也就是删库跑路。当然一般人都不会这样直接运行，但是可能会在shell脚本出现这种错，以下场景就导致这种情况。</p><p>shell脚本可能会这样<br>xxxpath&#x3D;xxx&#x2F;xx<br>…（逻辑部分）<br>rm -rf $xxxpath&#x2F;*    这里就是个坑</p><p>如果一空值赋予给了xxxpath，那么不就成了rm -rf &#x2F;*<br>所以在生产上凡是碰见rm -rf强制删除文件夹的，路径一定先判断存在不，不存在 就skip；就存在就rm</p></blockquote></li><li><p>history，历史记录</p><blockquote><p>history -c 就是清除命令记录，当然个人用户登陆时，~&#x2F;.bash_history也会记录命令，所以要清除的话，记得也把它给删掉</p></blockquote></li><li><p>用户&#x2F;用户组命令集合</p><ul><li>useradd 用户名，添加用户，它的家目录就在&#x2F;home&#x2F;用户名</li><li>id 用户名，显示用户和用户组信息</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@hadoop001 ~]# id dengdi<br>uid=1001(dengdi) gid=1001(dengdi) groups=1001(dengdi)<br>用户ID             主组ID           所有组<br></code></pre></td></tr></table></figure><ul><li><p>cat &#x2F;etc&#x2F;passwd，显示所有用户的信息</p><blockquote><p>dengdi(用户名) : x :1001(用户id):1001(主组id)::&#x2F;home&#x2F;dengdi(家目录):&#x2F;bin&#x2F;bash(执行解释器)  </p><p>如果&#x2F;bin&#x2F;bash变成&#x2F;bin&#x2F;false或者&#x2F;sbin&#x2F;nologin，这个用户就不能登陆了</p></blockquote></li><li><p>userdel 用户名，删除用户</p><blockquote><p>删除用户，会把&#x2F;etc&#x2F;passwd记录删除；<br>同时假如该组没有其他用户，则删除该组<br>但是 家目录还在,但是用户和用户组 发生变革</p></blockquote></li></ul></li></ul><p>一个特别的现象：执行userdel然后再useradd，会提示以下消息：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@hadoop001 ~]# userdel dengdi<br>[root@hadoop001 ~]# useradd dengdi<br>useradd: warning: the home directory already exists.<br>Not copying any file from skel directory into it.<br>Creating mailbox file: File exists<br></code></pre></td></tr></table></figure><p>这里提示的<strong>skel directory</strong>就是.bash*所有的隐藏文件，我们尝试将这些删除然后切换dengdi用户</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@hadoop001 ~]# ll -a /home/dengdi/<br>total 12<br>drwx------  2 dengdi dengdi  59 Jun 17 23:48 .<br>drwxr-xr-x. 4 root   root    32 Jun 17 23:48 ..<br>-rw-r--r--  1 dengdi dengdi  18 Apr 11  2018 .bash_logout<br>-rw-r--r--  1 dengdi dengdi 193 Apr 11  2018 .bash_profile<br>-rw-r--r--  1 dengdi dengdi 231 Apr 11  2018 .bashrc<br>[root@hadoop001 ~]# ll -a /home/dengdi/<br>total 16<br>drwx------  2 dengdi dengdi  79 Jun 18 00:06 .<br>drwxr-xr-x. 4 root   root    32 Jun 17 23:48 ..<br>-rw-------  1 dengdi dengdi   5 Jun 18 00:06 .bash_history<br>-rw-r--r--  1 dengdi dengdi  18 Apr 11  2018 .bash_logout<br>-rw-r--r--  1 dengdi dengdi 193 Apr 11  2018 .bash_profile<br>-rw-r--r--  1 dengdi dengdi 231 Apr 11  2018 .bashrc<br>[root@hadoop001 ~]# rm -rf /home/dengdi/.*<br>rm: refusing to remove ‘.’ or ‘..’ directory: skipping ‘/home/dengdi/.’<br>rm: refusing to remove ‘.’ or ‘..’ directory: skipping ‘/home/dengdi/..’<br>[root@hadoop001 ~]# ll -a /home/dengdi/<br>total 0<br>drwx------  2 dengdi dengdi  6 Jun 18 00:08 .<br>drwxr-xr-x. 4 root   root   32 Jun 17 23:48 ..<br>[root@hadoop001 ~]# su - dengdi<br>Last login: Tue Jun 18 00:07:26 CST 2019 on pts/0<br>-bash-4.2$<br></code></pre></td></tr></table></figure><p>所以skel directory是决定你的[root@hadoop001 ~]还是-bash-4.2$</p><ul><li><p>groupadd 用户组，新增用户组</p></li><li><p>usermod -a -G 用户组 dengdi， 添加用户组新成员为dengdi</p></li><li><p>usermod -g 用户组 dengdi， 修改xxx为主组，重新指定主组之后，会丢失原来的主组</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@hadoop001 ~]# groupadd bigdata<br>[root@hadoop001 ~]# id ruoze<br>uid=501(ruoze) gid=501(ruoze) groups=501(ruoze)<br>[root@hadoop001 ~]# usermod -a -G bigdata ruoze<br>[root@hadoop001 ~]# id ruoze<br>uid=501(ruoze) gid=501(ruoze) groups=501(ruoze),502(bigdata)<br>[root@hadoop001 ~]# usermod -g bigdata ruoze<br>[root@hadoop001 ~]# id ruoze<br>uid=501(ruoze) gid=502(bigdata) groups=502(bigdata)<br></code></pre></td></tr></table></figure></li><li><p>usermod -d 路径 用户，重新指定用户家目录</p></li><li><p>su，切换用户</p><blockquote><p>su ruoze   切换用户 当前路径不会变，就是切换之前的路径<br>su - ruoze 切换用户 且切到该用户的家目录，且执行环境变量文件生效</p></blockquote></li><li><p>passwd 用户, 设置密码或者重置密码</p></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2022/09/24/hello-world/"/>
    <url>/2022/09/24/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
